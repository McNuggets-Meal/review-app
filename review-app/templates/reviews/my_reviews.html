{% extends 'base.html' %}

{% block title %}My Reviews - Movie & Game Reviews{% endblock %}

{% block content %}
<div class="my-reviews-page">
    <div class="page-header">
        <h1>My Reviews</h1>
        <a href="{{ url_for('reviews.create') }}" class="btn-primary">Post New Review</a>
    </div>

    {% if reviews %}
    <p class="review-count">You have {{ reviews|length }} review{% if reviews|length != 1 %}s{% endif %}</p>

    <div class="my-reviews-list">
        {% for review in reviews %}
        <div class="my-review-card">
            <div class="my-review-header">
                <div>
                    <h3>{{ review.title }}</h3>
                    <span class="category-badge category-{{ review.category }}">{{ review.category }}</span>
                </div>
                <div class="my-review-rating">
                    {{ review.rating|star_rating }}
                    <span class="rating-number">({{ review.rating }}/5)</span>
                </div>
            </div>

            <div class="my-review-meta">
                <span>Posted: {{ review.review_date|format_date }}</span>
                {% if review.updated_at %}
                <span>Updated: {{ review.updated_at|format_date }}</span>
                {% endif %}
            </div>

            <div class="my-review-excerpt">
                {{ review.review_text|truncate_text(200) }}
            </div>

            <div class="my-review-actions">
                <a href="{{ url_for('reviews.view', review_id=review.id) }}" class="btn-link">View</a>
                <a href="{{ url_for('reviews.edit', review_id=review.id) }}" class="btn-secondary">Edit</a>
                <form method="POST" action="{{ url_for('reviews.delete', review_id=review.id) }}"
                      style="display: inline;"
                      onsubmit="return confirm('Are you sure you want to delete this review?');">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <button type="submit" class="btn-danger">Delete</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <h2>You haven't posted any reviews yet</h2>
        <p>Share your thoughts about your favorite movies and games!</p>
        <a href="{{ url_for('reviews.create') }}" class="btn-primary">Post Your First Review</a>
    </div>
    {% endif %}
</div>
{% endblock %}
