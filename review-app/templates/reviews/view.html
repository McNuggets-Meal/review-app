{% extends 'base.html' %}

{% block title %}{{ review.title }} - Movie & Game Reviews{% endblock %}

{% block content %}
<div class="review-detail">
    <div class="review-header-section">
        <a href="{{ url_for('main.index') }}" class="back-link">‚Üê Back to all reviews</a>

        <div class="review-title-section">
            <h1>{{ review.title }}</h1>
            <span class="category-badge category-{{ review.category }}">{{ review.category }}</span>
        </div>

        <div class="review-rating-large">
            {{ review.rating|star_rating }}
            <span class="rating-number">({{ review.rating }}/5)</span>
        </div>

        <div class="review-metadata">
            <p><strong>Reviewed by:</strong> {{ review.username }}</p>
            <p><strong>Posted:</strong> {{ review.review_date|format_date }}</p>
            {% if review.updated_at %}
            <p><strong>Last updated:</strong> {{ review.updated_at|format_date }}</p>
            {% endif %}
        </div>
    </div>

    <div class="review-content">
        <h3>Review</h3>
        <p class="review-text">{{ review.review_text }}</p>
    </div>

    {% if is_owner %}
    <div class="review-actions">
        <a href="{{ url_for('reviews.edit', review_id=review.id) }}" class="btn-primary">Edit Review</a>
        <form method="POST" action="{{ url_for('reviews.delete', review_id=review.id) }}"
              style="display: inline;"
              onsubmit="return confirm('Are you sure you want to delete this review? This action cannot be undone.');">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <button type="submit" class="btn-danger">Delete Review</button>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}
